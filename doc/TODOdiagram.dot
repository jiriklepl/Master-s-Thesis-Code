digraph {
    node [style="filled"]

    subgraph ends {
        node [shape="ellipse"]

        Source [fillcolor="lightblue"]
        LLVM [fillcolor="lightblue"]
    }

    subgraph data {
        node [shape="parallelogram"]

        AST [fillcolor="lightgreen"]
        Judgements [label="Type Judgements", fillcolor="pink"]
        FlatAST [label="Flat AST", fillcolor="lightgreen"]
        FlatASTAnnots [label="Flat AST\nwith block annotations", fillcolor="lightgreen"]
        MonoAST [label="Monomophized AST", fillcolor="pink"]
    }

    subgraph components {
        node [shape="component"]

        Parser [fillcolor="lightgreen"]
        Flattener [fillcolor="lightgreen"]
        Infer [label="Type\ninference", fillcolor="pink"]
        LRAnalysis [fillcolor="lightgreen"]
        Monomorphization [fillcolor="pink"]
        Translator [fillcolor="yellow"]
    }

    subgraph decisions {
        node [shape="diamond"]
    }

    Source -> Parser -> AST
    AST -> Flattener -> FlatAST
    AST -> Infer -> Judgements -> Monomorphization
    FlatAST -> LRAnalysis -> FlatASTAnnots
    FlatASTAnnots -> Monomorphization -> MonoAST
    MonoAST -> Translator -> LLVM
}
