digraph {
    subgraph data {
        node [shape="parallelogram"]

        subgraph {
            AST
            Source
            FlatAST [label="Flat AST"]
            FlatASTAnnots [label="Flat AST\nwith block annotations"]
            LLVM
        }
    }

    subgraph components {
        node [shape="component"]

        Parser
        Flattener
        LRAnalysis
        Translator
    }

    subgraph decisions {
        node [shape="diamond"]
    }

    Source -> Parser -> AST
    AST -> Flattener -> FlatAST
    FlatAST -> LRAnalysis -> FlatASTAnnots
    FlatASTAnnots -> Translator -> LLVM
}
